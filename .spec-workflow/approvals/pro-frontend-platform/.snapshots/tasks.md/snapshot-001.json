{
  "id": "snapshot_1759381197824_lycdxch1q",
  "approvalId": "approval_1759381197808_twhq51ogy",
  "approvalTitle": "专业级前端开发平台 任务分解文档（Phase 3）审批请求",
  "version": 1,
  "timestamp": "2025-10-02T04:59:57.824Z",
  "trigger": "initial",
  "status": "pending",
  "content": "专业级前端开发平台 任务分解（Phase 3 / Tasks）\n\n说明\n- 使用任务状态标记：[ ] pending，[-] in-progress，[x] completed。\n- 任务按四大核心模块与跨模块能力拆分，包含验收标准与负责人占位。\n\n总览与里程碑\n- [-] M1 需求澄清最小可用：对话澄清 + 文档导出（Markdown/PDF/Word）+ 审计\n- [ ] M2 视觉风格生成与可视化调整：双方案 + 设计令牌 + 预览\n- [ ] M3 交互原型生成与代码导出：视觉回归 + 自动修复\n- [ ] M4 网站生成与部署：质量门禁（性能/SEO/可访问性）+ 云端部署\n- [ ] M5 跨模块互通、沙盒完善、性能与安全增强\n\n跨模块基础（平台层）\n- [-] 统一鉴权与权限\n  - [ ] OIDC/JWT 登录与会话管理（后端 + 前端）\n  - [ ] 细粒度权限头（X-User-Permissions）与后端中间件\n  - 验收：登录/登出、权限受控接口返回 401/403；审计记录登录事件。\n- [-] 审计与日志\n  - [x] CLI 运行审计（aicodegen_run）与 HTTP 转发（ForwardNoContext）\n  - [ ] Web/API 操作审计（action、userId、ticket、detail）统一埋点\n  - 验收：操作产生 stdout [AUDIT] 与 JSONL 文件；转发成功/失败可追踪。\n- [ ] 事件总线与互通\n  - [ ] 选型（Kafka/NATS/Redis Streams）与封装（publish/subscribe）\n  - [ ] 事件 schema 与 traceId/requestId 贯穿\n  - 验收：跨模块事件联动（澄清完成触发风格生成）。\n- [ ] 沙盒运行与资源控制\n  - [ ] Worker/容器隔离、资源限制（CPU/内存/并发）、网络白名单\n  - [ ] 生命周期清理：预览回收与临时文件清理\n  - 验收：并发运行稳定、资源超限可控、清理完整。\n- [ ] 存储与产物管理\n  - [ ] 文档/风格/原型/构建产物统一存储接口（对象存储或本地 + 元数据）\n  - 验收：产物可检索、版本化、权限控制生效。\n- [ ] 观测性（Metrics/Tracing）\n  - [ ] 请求追踪（traceId）、错误分级告警、性能指标采集\n  - 验收：仪表盘可视、异常可定位。\n\n模块 1：需求澄清（clarify-svc）\n- [-] API 设计与路由\n  - [ ] POST /api/clarify/generate（text→spec+tasks+openapi）\n  - [ ] WS /api/clarify/stream（多轮对话流 + 自动摘要）\n  - [ ] GET /api/docs/:id（版本/差异/责任人）\n  - 验收：OpenAPI 定义完整、后端路由可调试、审计埋点。\n- [ ] 文档编辑器（可视化）\n  - [ ] 块级编辑器（TipTap/ProseMirror），拖拽布局、结构化编辑\n  - [ ] 版本控制与 Diff 视图\n  - 验收：编辑→版本→导出闭环；权限与审计生效。\n- [ ] 智能补全与术语映射\n  - [ ] NLP 引擎集成，术语标准化（terms.json）\n  - [ ] 冲突检测与优化建议（上下文感知）\n  - 验收：建议可接受/拒绝并记录；术语规范化生效。\n- [ ] 文档导出\n  - [ ] Markdown 原生；PDF/Word 通过后端转换（Pandoc）\n  - 验收：三格式导出一致；标题/目录/分页规范。\n\n模块 2：视觉风格生成（style-svc）\n- [ ] 设计令牌与主题系统\n  - [ ] Tokens Schema（色彩/字号/间距/圆角/阴影/栅格）\n  - [ ] CSS 变量 + Tailwind/Vanilla Extract 集成\n  - 验收：主题切换与令牌应用一致。\n- [ ] 双方案生成器\n  - [ ] 基于 Spec + 规则库生成两套差异化方案（附风格说明）\n  - [ ] A11y 冲突检测（对比度 AA/AAA）\n  - 验收：每次生成两套方案与报告；颜色/排版差异明显。\n- [ ] 可视化调整工具\n  - [ ] 精确控制参数（色板/间距/圆角等）\n  - [ ] 历史轨迹记录与报告导出\n  - 验收：历史可回溯、变更报告可下载。\n\n模块 3：交互原型（proto-svc）\n- [ ] 原型生成与组件库\n  - [ ] 依据 Spec 与 Tokens 生成页面/路由/状态/组件\n  - [ ] 支持主流设计系统规范（Material/Ant/Fluent）\n  - 验收：原型完整可交互，结构符合规范。\n- [ ] 多设备预览与调试\n  - [ ] PC/平板/手机断点调试，交互测试\n  - [ ] 流式日志与性能指标（LCP/CLS）\n  - 验收：预览稳定、断点与交互测试通过。\n- [ ] 原型→代码导出\n  - [ ] 生成工程化代码（HTML/CSS/TS/React/Vue）\n  - [ ] 视觉回归与自动修复（pixel-diff + 布局校验）\n  - 验收：像素级一致性达标；修复建议可应用。\n\n模块 4：网站生成（sitegen-svc）\n- [ ] 构建流水线与质量门禁\n  - [ ] lint/test/build/analyze 集成（Lighthouse/axe-core）\n  - [ ] 阈值策略：性能/SEO/可访问性达标才允许发布\n  - 验收：未达标阻断发布并输出建议。\n- [ ] 部署适配与云连接器\n  - [ ] Vercel/Netlify/AWS Amplify/自托管部署\n  - [ ] 环境配置与密钥管理；蓝绿/金丝雀发布\n  - 验收：一键部署成功，可回滚。\n- [ ] 自然语言修改与热修复\n  - [ ] 布局调整、功能增删、性能优化与安全修复\n  - 验收：指令驱动修改生效并审计记录。\n\n测试与验收\n- [ ] 单元与集成测试：澄清/风格/原型/站点四模块覆盖\n- [ ] 端到端（E2E）：从文本 → 规格 → 风格 → 原型 → 站点 → 部署的全链路\n- [ ] 质量门禁：Lighthouse/axe-core 指标达标（阈值可配置）\n- [ ] 审计追踪：关键事件完整记录，含用户与票据（ticket）\n\n负责人（占位）\n- Clarify：Owner TBD\n- Style：Owner TBD\n- Prototype：Owner TBD\n- Sitegen：Owner TBD\n- Platform（Auth/Audit/Sandbox/Events/Storage/Obs）：Owner TBD\n\n依赖与风险\n- 依赖：LLM 服务、对象存储、消息队列、CI/CD 基础设施。\n- 风险：生成质量与一致性、资源成本、合规与隐私要求、跨模块耦合与复杂度。",
  "fileStats": {
    "size": 5664,
    "lines": 112,
    "lastModified": "2025-10-02T04:57:53.338Z"
  },
  "comments": []
}