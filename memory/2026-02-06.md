# 2026-02-06 工作日志

## 今日成果

### 1. A/B 测试：工具调用策略
- **方案 A**（预检）vs **方案 B**（直接调用 + 错了就改）
- **结果**：方案 B 胜出
- **教训**：假预检比不预检更危险（记错参数名）
- **结论**：高频操作用方案 B，危险操作用方案 A（查文档）

### 2. TOOLS.md 速查表
- 更新了工具参数速查表
- `write` 只接受 `file_path`，不接受 `path`
- `read`/`edit` 两者都支持

### 3. 发现 OpenClaw Bug
- **问题**：`write` 工具的 `path` 参数不被接受
- **原因**：schema 验证在参数转换之前，`normalizeToolParams` 没机会执行
- **状态**：待提 issue

### 4. 记忆归档脚本
- 创建 `scripts/archive-old-memories.sh`
- 功能：扫描旧日志 → LLM 生成摘要 → 追加到 MEMORY.md → 归档
- 已部署到全员
- 已加到 HEARTBEAT.md，每周执行

### 5. 多模型兼容性研究（待续）
- 上下文存储在 `sessions/*.jsonl`，用 Anthropic 格式
- OpenClaw 读取时已有格式兼容逻辑
- 发现 `validateAnthropicTurns`、`validateGeminiTurns` 等函数
- 结论：OpenClaw 内部已经做了处理，问题可能没那么严重

### 6. 其他
- 修复 @employee2 的 503/400 问题
- 创建 `switch-model.sh` 脚本（模型切换时自动摘要）

## 参与者
- @oldking
- @employee1
- @employee2
- HaoDaEr（我）

## 明日待办
- [ ] 多模型兼容性实际测试
- [ ] 提 OpenClaw issue（path 参数问题）
